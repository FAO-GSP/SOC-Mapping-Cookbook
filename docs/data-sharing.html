<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Soil Organic Carbon Mapping Cookbook</title>
  <meta name="description" content="The soilll cookbook.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Soil Organic Carbon Mapping Cookbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="The soilll cookbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Soil Organic Carbon Mapping Cookbook" />
  
  <meta name="twitter:description" content="The soilll cookbook." />
  <meta name="twitter:image" content="images/cover.png" />

<meta name="author" content="Food and Agriculture Organization of the United Nations, Rome, 2018">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="uncertainty.html">
<link rel="next" href="technical-overview-and-the-checklist.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>List of contributors</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#editorial-board"><i class="fa fa-check"></i>Editorial board</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributing-authors"><i class="fa fa-check"></i>Contributing authors</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>1</b> Presentation</a><ul>
<li class="chapter" data-level="1.1" data-path="presentation.html"><a href="presentation.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="presentation.html"><a href="presentation.html#the-fyrom-soil-database"><i class="fa fa-check"></i><b>1.2</b> The FYROM soil database</a></li>
<li class="chapter" data-level="1.3" data-path="presentation.html"><a href="presentation.html#foreword-to-the-first-edition"><i class="fa fa-check"></i><b>1.3</b> Foreword to the first edition</a></li>
<li class="chapter" data-level="1.4" data-path="presentation.html"><a href="presentation.html#foreword-to-the-second-edition"><i class="fa fa-check"></i><b>1.4</b> Foreword to the second edition</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soil-property-maps.html"><a href="soil-property-maps.html"><i class="fa fa-check"></i><b>2</b> Soil property maps</a><ul>
<li class="chapter" data-level="2.1" data-path="soil-property-maps.html"><a href="soil-property-maps.html#definitions-and-objectives"><i class="fa fa-check"></i><b>2.1</b> Definitions and objectives</a></li>
<li class="chapter" data-level="2.2" data-path="soil-property-maps.html"><a href="soil-property-maps.html#generic-mapping-of-soil-grids-upscaling-of-plot-level-measurements-and-estimates"><i class="fa fa-check"></i><b>2.2</b> Generic mapping of soil grids: upscaling of plot-Level measurements and estimates</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html"><i class="fa fa-check"></i><b>3</b> Setting-up the software environment</a><ul>
<li class="chapter" data-level="3.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#use-of-r-rstudio-and-r-packages"><i class="fa fa-check"></i><b>3.1</b> Use of R, RStudio and R Packages</a><ul>
<li class="chapter" data-level="3.1.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>3.1.1</b> Obtaining and installing R</a></li>
<li class="chapter" data-level="3.1.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>3.1.2</b> Obtaining and installing RStudio</a></li>
<li class="chapter" data-level="3.1.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#getting-started-with-r"><i class="fa fa-check"></i><b>3.1.3</b> Getting started with R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a><ul>
<li class="chapter" data-level="3.2.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#finding-r-packages"><i class="fa fa-check"></i><b>3.2.1</b> Finding R packages</a></li>
<li class="chapter" data-level="3.2.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#most-used-r-packages-for-digital-soil-mapping"><i class="fa fa-check"></i><b>3.2.2</b> Most used R packages for digital soil mapping</a></li>
<li class="chapter" data-level="3.2.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#packages-used-in-this-cookbook"><i class="fa fa-check"></i><b>3.2.3</b> Packages used in this cookbook</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#r-and-spatial-data"><i class="fa fa-check"></i><b>3.3</b> R and spatial data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#reading-shapefiles"><i class="fa fa-check"></i><b>3.3.1</b> Reading shapefiles</a></li>
<li class="chapter" data-level="3.3.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#coordinate-reference-systems-in-r"><i class="fa fa-check"></i><b>3.3.2</b> Coordinate reference systems in R</a></li>
<li class="chapter" data-level="3.3.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#working-with-rasters"><i class="fa fa-check"></i><b>3.3.3</b> Working with rasters</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#other-dsm-software-and-tools"><i class="fa fa-check"></i><b>3.4</b> Other DSM software and tools</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparation.html"><a href="preparation.html"><i class="fa fa-check"></i><b>4</b> Preparation of local soil data</a><ul>
<li class="chapter" data-level="4.1" data-path="preparation.html"><a href="preparation.html#soil-profiles-and-soil-augers"><i class="fa fa-check"></i><b>4.1</b> Soil profiles and soil augers</a></li>
<li class="chapter" data-level="4.2" data-path="preparation.html"><a href="preparation.html#soil-database"><i class="fa fa-check"></i><b>4.2</b> Soil database</a><ul>
<li class="chapter" data-level="4.2.1" data-path="preparation.html"><a href="preparation.html#type-of-soil-database"><i class="fa fa-check"></i><b>4.2.1</b> Type of soil database</a></li>
<li class="chapter" data-level="4.2.2" data-path="preparation.html"><a href="preparation.html#technical-steps-loading-soil-data-from-tables-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Technical steps – Loading soil data from tables in R</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="preparation.html"><a href="preparation.html#completeness-of-measurements-and-estimates"><i class="fa fa-check"></i><b>4.3</b> Completeness of measurements and estimates</a><ul>
<li class="chapter" data-level="4.3.1" data-path="preparation.html"><a href="preparation.html#stones"><i class="fa fa-check"></i><b>4.3.1</b> Stones</a></li>
<li class="chapter" data-level="4.3.2" data-path="preparation.html"><a href="preparation.html#bulk-density"><i class="fa fa-check"></i><b>4.3.2</b> Bulk density</a></li>
<li class="chapter" data-level="4.3.3" data-path="preparation.html"><a href="preparation.html#soil-carbon-analysis"><i class="fa fa-check"></i><b>4.3.3</b> Soil carbon analysis</a></li>
<li class="chapter" data-level="4.3.4" data-path="preparation.html"><a href="preparation.html#carbonates"><i class="fa fa-check"></i><b>4.3.4</b> Carbonates</a></li>
<li class="chapter" data-level="4.3.5" data-path="preparation.html"><a href="preparation.html#depth"><i class="fa fa-check"></i><b>4.3.5</b> Depth</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="preparation.html"><a href="preparation.html#soil-depth-estimate"><i class="fa fa-check"></i><b>4.4</b> Soil depth estimate</a><ul>
<li class="chapter" data-level="4.4.1" data-path="preparation.html"><a href="preparation.html#completeness-of-depth-estimate"><i class="fa fa-check"></i><b>4.4.1</b> Completeness of depth estimate</a></li>
<li class="chapter" data-level="4.4.2" data-path="preparation.html"><a href="preparation.html#EqualAreaSplines"><i class="fa fa-check"></i><b>4.4.2</b> Technical steps - Equal-area splines using R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="covariates.html"><a href="covariates.html"><i class="fa fa-check"></i><b>5</b> Preparation of spatial covariates</a><ul>
<li class="chapter" data-level="5.1" data-path="covariates.html"><a href="covariates.html#dem-derived-covariates"><i class="fa fa-check"></i><b>5.1</b> DEM-derived covariates</a></li>
<li class="chapter" data-level="5.2" data-path="covariates.html"><a href="covariates.html#parent-material"><i class="fa fa-check"></i><b>5.2</b> Parent material</a></li>
<li class="chapter" data-level="5.3" data-path="covariates.html"><a href="covariates.html#soil-maps"><i class="fa fa-check"></i><b>5.3</b> Soil maps</a><ul>
<li class="chapter" data-level="5.3.1" data-path="covariates.html"><a href="covariates.html#global-hwsd-soil-property-maps"><i class="fa fa-check"></i><b>5.3.1</b> Global HWSD soil property maps</a></li>
<li class="chapter" data-level="5.3.2" data-path="covariates.html"><a href="covariates.html#technical-steps---rasterizing-a-vector-layer-in-r"><i class="fa fa-check"></i><b>5.3.2</b> Technical steps - Rasterizing a vector layer in R</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="covariates.html"><a href="covariates.html#land-cover-and-land-use"><i class="fa fa-check"></i><b>5.4</b> Land cover and land use</a><ul>
<li class="chapter" data-level="5.4.1" data-path="covariates.html"><a href="covariates.html#globcover-global"><i class="fa fa-check"></i><b>5.4.1</b> GlobCover (Global)</a></li>
<li class="chapter" data-level="5.4.2" data-path="covariates.html"><a href="covariates.html#landsat-geocover-global"><i class="fa fa-check"></i><b>5.4.2</b> Landsat GeoCover (Global)</a></li>
<li class="chapter" data-level="5.4.3" data-path="covariates.html"><a href="covariates.html#globeland30-global"><i class="fa fa-check"></i><b>5.4.3</b> GlobeLand30 (Global)</a></li>
<li class="chapter" data-level="5.4.4" data-path="covariates.html"><a href="covariates.html#corine-land-cover-europe-only"><i class="fa fa-check"></i><b>5.4.4</b> CORINE land cover (Europe only)</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="covariates.html"><a href="covariates.html#climate"><i class="fa fa-check"></i><b>5.5</b> Climate</a><ul>
<li class="chapter" data-level="5.5.1" data-path="covariates.html"><a href="covariates.html#worldclim-v1.4-and-v2-global"><i class="fa fa-check"></i><b>5.5.1</b> WorldClim V1.4 and V2 (Global)</a></li>
<li class="chapter" data-level="5.5.2" data-path="covariates.html"><a href="covariates.html#gridded-agro-meteorological-data-in-europe-europe"><i class="fa fa-check"></i><b>5.5.2</b> Gridded agro-meteorological data in Europe (Europe)</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="covariates.html"><a href="covariates.html#GSOCDataRepo"><i class="fa fa-check"></i><b>5.6</b> GSOCMap - Data repository (ISRIC, 2017)</a><ul>
<li class="chapter" data-level="5.6.1" data-path="covariates.html"><a href="covariates.html#covariates-and-empty-mask"><i class="fa fa-check"></i><b>5.6.1</b> Covariates and empty mask</a></li>
<li class="chapter" data-level="5.6.2" data-path="covariates.html"><a href="covariates.html#data-specifications"><i class="fa fa-check"></i><b>5.6.2</b> Data specifications</a></li>
<li class="chapter" data-level="5.6.3" data-path="covariates.html"><a href="covariates.html#data-access"><i class="fa fa-check"></i><b>5.6.3</b> Data access</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="covariates.html"><a href="covariates.html#extending-the-soil-property-table-for-spatial-statistics"><i class="fa fa-check"></i><b>5.7</b> Extending the soil property table for spatial statistics</a></li>
<li class="chapter" data-level="5.8" data-path="covariates.html"><a href="covariates.html#preparation-of-a-soil-property-table-for-spatial-statistics"><i class="fa fa-check"></i><b>5.8</b> Preparation of a soil property table for spatial statistics</a></li>
<li class="chapter" data-level="5.9" data-path="covariates.html"><a href="covariates.html#overlay-soil-covariates"><i class="fa fa-check"></i><b>5.9</b> Technical steps - Overlay covariates and soil points data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mappingMethods.html"><a href="mappingMethods.html"><i class="fa fa-check"></i><b>6</b> Mapping methods</a><ul>
<li class="chapter" data-level="6.1" data-path="mappingMethods.html"><a href="mappingMethods.html#convUpscaling"><i class="fa fa-check"></i><b>6.1</b> Conventional upscaling using soil maps</a><ul>
<li class="chapter" data-level="6.1.1" data-path="mappingMethods.html"><a href="mappingMethods.html#overview"><i class="fa fa-check"></i><b>6.1.1</b> Overview</a></li>
<li class="chapter" data-level="6.1.2" data-path="mappingMethods.html"><a href="mappingMethods.html#diversity-of-national-soil-legacy-data-sets"><i class="fa fa-check"></i><b>6.1.2</b> Diversity of national soil legacy data sets</a></li>
<li class="chapter" data-level="6.1.3" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---class-matching"><i class="fa fa-check"></i><b>6.1.3</b> Technical steps - Class-matching</a></li>
<li class="chapter" data-level="6.1.4" data-path="mappingMethods.html"><a href="mappingMethods.html#geomQGIS"><i class="fa fa-check"></i><b>6.1.4</b> Technical steps - Geo-matching</a></li>
<li class="chapter" data-level="6.1.5" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---geo-matching-soc-with-wrb-soil-map-in-r"><i class="fa fa-check"></i><b>6.1.5</b> Technical steps - Geo-matching SOC with WRB soil map in R</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="mappingMethods.html"><a href="mappingMethods.html#RK"><i class="fa fa-check"></i><b>6.2</b> Regression-Kriging</a><ul>
<li class="chapter" data-level="6.2.1" data-path="mappingMethods.html"><a href="mappingMethods.html#overview-1"><i class="fa fa-check"></i><b>6.2.1</b> Overview</a></li>
<li class="chapter" data-level="6.2.2" data-path="mappingMethods.html"><a href="mappingMethods.html#assumptions"><i class="fa fa-check"></i><b>6.2.2</b> Assumptions</a></li>
<li class="chapter" data-level="6.2.3" data-path="mappingMethods.html"><a href="mappingMethods.html#pre-processing-of-covariates"><i class="fa fa-check"></i><b>6.2.3</b> Pre-processing of covariates</a></li>
<li class="chapter" data-level="6.2.4" data-path="mappingMethods.html"><a href="mappingMethods.html#the-terminology"><i class="fa fa-check"></i><b>6.2.4</b> The terminology</a></li>
<li class="chapter" data-level="6.2.5" data-path="mappingMethods.html"><a href="mappingMethods.html#interpret-the-key-results-of-multiple-regression"><i class="fa fa-check"></i><b>6.2.5</b> Interpret the Key Results of Multiple Regression</a></li>
<li class="chapter" data-level="6.2.6" data-path="mappingMethods.html"><a href="mappingMethods.html#using-the-results-of-a-regression-analysis-to-make-predictions"><i class="fa fa-check"></i><b>6.2.6</b> Using the results of a regression analysis to make predictions</a></li>
<li class="chapter" data-level="6.2.7" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---regression-kriging"><i class="fa fa-check"></i><b>6.2.7</b> Technical steps - Regression-kriging</a></li>
<li class="chapter" data-level="6.2.8" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---cross-validation-of-regression-kriging-models"><i class="fa fa-check"></i><b>6.2.8</b> Technical steps - Cross-validation of regression-kriging models</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="mappingMethods.html"><a href="mappingMethods.html#rf"><i class="fa fa-check"></i><b>6.3</b> Data mining: random forest</a><ul>
<li class="chapter" data-level="6.3.1" data-path="mappingMethods.html"><a href="mappingMethods.html#overview-2"><i class="fa fa-check"></i><b>6.3.1</b> Overview</a></li>
<li class="chapter" data-level="6.3.2" data-path="mappingMethods.html"><a href="mappingMethods.html#random-forest"><i class="fa fa-check"></i><b>6.3.2</b> Random forest</a></li>
<li class="chapter" data-level="6.3.3" data-path="mappingMethods.html"><a href="mappingMethods.html#conceptual-model-and-data-preparation"><i class="fa fa-check"></i><b>6.3.3</b> Conceptual model and data preparation</a></li>
<li class="chapter" data-level="6.3.4" data-path="mappingMethods.html"><a href="mappingMethods.html#software"><i class="fa fa-check"></i><b>6.3.4</b> Software</a></li>
<li class="chapter" data-level="6.3.5" data-path="mappingMethods.html"><a href="mappingMethods.html#tunning-random-forest-model-parameters"><i class="fa fa-check"></i><b>6.3.5</b> Tunning random forest model parameters</a></li>
<li class="chapter" data-level="6.3.6" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---random-forest"><i class="fa fa-check"></i><b>6.3.6</b> Technical steps - Random forest</a></li>
<li class="chapter" data-level="6.3.7" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---using-quantile-regression-forest-to-estimate-uncertainty"><i class="fa fa-check"></i><b>6.3.7</b> Technical steps - Using quantile regression forest to estimate uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mappingMethods.html"><a href="mappingMethods.html#svm"><i class="fa fa-check"></i><b>6.4</b> Data mining: support vector machines</a><ul>
<li class="chapter" data-level="6.4.1" data-path="mappingMethods.html"><a href="mappingMethods.html#overview-3"><i class="fa fa-check"></i><b>6.4.1</b> Overview</a></li>
<li class="chapter" data-level="6.4.2" data-path="mappingMethods.html"><a href="mappingMethods.html#technical-steps---fitting-an-svm-model-to-predict-the-soc"><i class="fa fa-check"></i><b>6.4.2</b> Technical steps - Fitting an SVM model to predict the SOC</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chvalidation.html"><a href="chvalidation.html"><i class="fa fa-check"></i><b>7</b> Validation</a><ul>
<li class="chapter" data-level="7.1" data-path="chvalidation.html"><a href="chvalidation.html#what-is-validation"><i class="fa fa-check"></i><b>7.1</b> What is validation?</a></li>
<li class="chapter" data-level="7.2" data-path="chvalidation.html"><a href="chvalidation.html#QualMeasures"><i class="fa fa-check"></i><b>7.2</b> Map quality measures</a><ul>
<li class="chapter" data-level="7.2.1" data-path="chvalidation.html"><a href="chvalidation.html#quality-measures-for-quantitative-soil-maps"><i class="fa fa-check"></i><b>7.2.1</b> Quality measures for quantitative soil maps</a></li>
<li class="chapter" data-level="7.2.2" data-path="chvalidation.html"><a href="chvalidation.html#quality-measures-for-qualitative-soil-maps"><i class="fa fa-check"></i><b>7.2.2</b> Quality measures for qualitative soil maps</a></li>
<li class="chapter" data-level="7.2.3" data-path="chvalidation.html"><a href="chvalidation.html#estimating-the-map-quality-measures-and-associated-uncertainty"><i class="fa fa-check"></i><b>7.2.3</b> Estimating the map quality measures and associated uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chvalidation.html"><a href="chvalidation.html#graphical-map-quality-measures"><i class="fa fa-check"></i><b>7.3</b> Graphical map quality measures</a></li>
<li class="chapter" data-level="7.4" data-path="chvalidation.html"><a href="chvalidation.html#validationMeth"><i class="fa fa-check"></i><b>7.4</b> Validation methods and statistical inference</a><ul>
<li class="chapter" data-level="7.4.1" data-path="chvalidation.html"><a href="chvalidation.html#addProbSampling"><i class="fa fa-check"></i><b>7.4.1</b> Additional probability sampling</a></li>
<li class="chapter" data-level="7.4.2" data-path="chvalidation.html"><a href="chvalidation.html#data-splitting"><i class="fa fa-check"></i><b>7.4.2</b> Data-splitting</a></li>
<li class="chapter" data-level="7.4.3" data-path="chvalidation.html"><a href="chvalidation.html#xval"><i class="fa fa-check"></i><b>7.4.3</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="chvalidation.html"><a href="chvalidation.html#TS:validation"><i class="fa fa-check"></i><b>7.5</b> Technical steps - Validation</a></li>
<li class="chapter" data-level="7.6" data-path="chvalidation.html"><a href="chvalidation.html#dataSplit"><i class="fa fa-check"></i><b>7.6</b> Technical steps - Data-splitting</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>8</b> Model evaluation in digital soil mapping</a><ul>
<li class="chapter" data-level="8.1" data-path="evaluation.html"><a href="evaluation.html#technical-steps---model-correlations-and-spatial-differences"><i class="fa fa-check"></i><b>8.1</b> Technical steps - Model correlations and spatial differences</a></li>
<li class="chapter" data-level="8.2" data-path="evaluation.html"><a href="evaluation.html#technical-steps---model-evaluation"><i class="fa fa-check"></i><b>8.2</b> Technical steps - Model evaluation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="uncertainty.html"><a href="uncertainty.html"><i class="fa fa-check"></i><b>9</b> Uncertainty</a><ul>
<li class="chapter" data-level="9.1" data-path="uncertainty.html"><a href="uncertainty.html#sourcesuncert"><i class="fa fa-check"></i><b>9.1</b> Sources of uncertainty</a><ul>
<li class="chapter" data-level="9.1.1" data-path="uncertainty.html"><a href="uncertainty.html#attribute-uncertainty-of-soil-measurements"><i class="fa fa-check"></i><b>9.1.1</b> Attribute uncertainty of soil measurements</a></li>
<li class="chapter" data-level="9.1.2" data-path="uncertainty.html"><a href="uncertainty.html#positional-uncertainty-of-soil-measurements"><i class="fa fa-check"></i><b>9.1.2</b> Positional uncertainty of soil measurements</a></li>
<li class="chapter" data-level="9.1.3" data-path="uncertainty.html"><a href="uncertainty.html#uncertainty-in-covariates"><i class="fa fa-check"></i><b>9.1.3</b> Uncertainty in covariates</a></li>
<li class="chapter" data-level="9.1.4" data-path="uncertainty.html"><a href="uncertainty.html#uncertainty-in-models-predicting-soil-properties-from-covariates-and-soil-point-data"><i class="fa fa-check"></i><b>9.1.4</b> Uncertainty in models predicting soil properties from covariates and soil point data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="uncertainty.html"><a href="uncertainty.html#uncertainty-and-spatial-data-quality"><i class="fa fa-check"></i><b>9.2</b> Uncertainty and spatial data quality</a></li>
<li class="chapter" data-level="9.3" data-path="uncertainty.html"><a href="uncertainty.html#quantifying-prediction-uncertainty"><i class="fa fa-check"></i><b>9.3</b> Quantifying prediction uncertainty</a><ul>
<li class="chapter" data-level="9.3.1" data-path="uncertainty.html"><a href="uncertainty.html#uncertainty-characterised-by-probability-distributions"><i class="fa fa-check"></i><b>9.3.1</b> Uncertainty characterised by probability distributions</a></li>
<li class="chapter" data-level="9.3.2" data-path="uncertainty.html"><a href="uncertainty.html#propagation-of-model-uncertainty"><i class="fa fa-check"></i><b>9.3.2</b> Propagation of model uncertainty</a></li>
<li class="chapter" data-level="9.3.3" data-path="uncertainty.html"><a href="uncertainty.html#propUncertainty"><i class="fa fa-check"></i><b>9.3.3</b> Propagation of attribute, positional and covariate uncertainty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-sharing.html"><a href="data-sharing.html"><i class="fa fa-check"></i><b>10</b> Data sharing</a><ul>
<li class="chapter" data-level="10.1" data-path="data-sharing.html"><a href="data-sharing.html#export-formats"><i class="fa fa-check"></i><b>10.1</b> Export formats</a><ul>
<li class="chapter" data-level="10.1.1" data-path="data-sharing.html"><a href="data-sharing.html#type-of-soil-data-and-their-formatting"><i class="fa fa-check"></i><b>10.1.1</b> Type of soil data and their formatting</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-sharing.html"><a href="data-sharing.html#general-gis-data-formats-vector-raster-table"><i class="fa fa-check"></i><b>10.1.2</b> General GIS data formats: vector, raster, table</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-sharing.html"><a href="data-sharing.html#recommended-gis-data-exchange-formats"><i class="fa fa-check"></i><b>10.1.3</b> Recommended GIS data exchange formats</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-sharing.html"><a href="data-sharing.html#webService"><i class="fa fa-check"></i><b>10.2</b> Web services: serving soil data using web technology</a><ul>
<li class="chapter" data-level="10.2.1" data-path="data-sharing.html"><a href="data-sharing.html#third-party-services"><i class="fa fa-check"></i><b>10.2.1</b> Third-party services</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-sharing.html"><a href="data-sharing.html#geoserver-web-serving-and-web-processing"><i class="fa fa-check"></i><b>10.2.2</b> GeoServer (web serving and web processing)</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-sharing.html"><a href="data-sharing.html#visualizing-data-using-leaflet-andor-google-earth"><i class="fa fa-check"></i><b>10.2.3</b> Visualizing data using Leaflet and/or Google Earth</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-sharing.html"><a href="data-sharing.html#preparing-soil-data-for-distribution"><i class="fa fa-check"></i><b>10.3</b> Preparing soil data for distribution</a><ul>
<li class="chapter" data-level="10.3.1" data-path="data-sharing.html"><a href="data-sharing.html#metadata"><i class="fa fa-check"></i><b>10.3.1</b> Metadata</a></li>
<li class="chapter" data-level="10.3.2" data-path="data-sharing.html"><a href="data-sharing.html#exporting-data-final-tips"><i class="fa fa-check"></i><b>10.3.2</b> Exporting data: final tips</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="data-sharing.html"><a href="data-sharing.html#export-formats-1"><i class="fa fa-check"></i><b>10.4</b> Export formats</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html"><i class="fa fa-check"></i><b>11</b> Technical overview and the checklist</a><ul>
<li class="chapter" data-level="11.1" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#point-dataset"><i class="fa fa-check"></i><b>11.1</b> Point dataset</a></li>
<li class="chapter" data-level="11.2" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#covariates-1"><i class="fa fa-check"></i><b>11.2</b> Covariates</a></li>
<li class="chapter" data-level="11.3" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#statistical-inference"><i class="fa fa-check"></i><b>11.3</b> Statistical inference</a></li>
<li class="chapter" data-level="11.4" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#spatial-interpolation"><i class="fa fa-check"></i><b>11.4</b> Spatial interpolation</a></li>
<li class="chapter" data-level="11.5" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#calculation-of-stocks"><i class="fa fa-check"></i><b>11.5</b> Calculation of stocks</a></li>
<li class="chapter" data-level="11.6" data-path="technical-overview-and-the-checklist.html"><a href="technical-overview-and-the-checklist.html#evaluation-of-output-and-quality-assessment"><i class="fa fa-check"></i><b>11.6</b> Evaluation of output and quality assessment</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="deliverables.html"><a href="deliverables.html"><i class="fa fa-check"></i><b>12</b> Deliverables</a></li>
<li class="chapter" data-level="13" data-path="compendium.html"><a href="compendium.html"><i class="fa fa-check"></i><b>13</b> Compendium of the code examples</a><ul>
<li class="chapter" data-level="13.1" data-path="compendium.html"><a href="compendium.html#cd:PreparationProfiles"><i class="fa fa-check"></i><b>13.1</b> Data preparation for soil profiles</a></li>
<li class="chapter" data-level="13.2" data-path="compendium.html"><a href="compendium.html#cd:PreparationAuger"><i class="fa fa-check"></i><b>13.2</b> Data preparation for topsoil or auger samples</a></li>
<li class="chapter" data-level="13.3" data-path="compendium.html"><a href="compendium.html#cd:merging"><i class="fa fa-check"></i><b>13.3</b> Merging topsoil or auger samples and soil profiles databases</a></li>
<li class="chapter" data-level="13.4" data-path="compendium.html"><a href="compendium.html#cd:data-splitting"><i class="fa fa-check"></i><b>13.4</b> Data-splitting</a></li>
<li class="chapter" data-level="13.5" data-path="compendium.html"><a href="compendium.html#cd:Rasterizing"><i class="fa fa-check"></i><b>13.5</b> Rasterizing a vector layer in R</a></li>
<li class="chapter" data-level="13.6" data-path="compendium.html"><a href="compendium.html#cd:Overlay"><i class="fa fa-check"></i><b>13.6</b> Overlay covariates and soil points data</a></li>
<li class="chapter" data-level="13.7" data-path="compendium.html"><a href="compendium.html#cd:RK"><i class="fa fa-check"></i><b>13.7</b> Fitting a regression-kriging model to predict the SOC stock</a></li>
<li class="chapter" data-level="13.8" data-path="compendium.html"><a href="compendium.html#cd:xvalRK"><i class="fa fa-check"></i><b>13.8</b> Cross-validation of regression-kriging models</a></li>
<li class="chapter" data-level="13.9" data-path="compendium.html"><a href="compendium.html#cd:rf"><i class="fa fa-check"></i><b>13.9</b> Fitting a random forest model to predict the SOC stock</a></li>
<li class="chapter" data-level="13.10" data-path="compendium.html"><a href="compendium.html#cd:quantreg"><i class="fa fa-check"></i><b>13.10</b> Using quantile regression forest to estimate uncertainty</a></li>
<li class="chapter" data-level="13.11" data-path="compendium.html"><a href="compendium.html#cd:svm"><i class="fa fa-check"></i><b>13.11</b> Fitting a support vector machines model to predict the SOC stock</a></li>
<li class="chapter" data-level="13.12" data-path="compendium.html"><a href="compendium.html#cd:Validation"><i class="fa fa-check"></i><b>13.12</b> Validation</a></li>
<li class="chapter" data-level="13.13" data-path="compendium.html"><a href="compendium.html#cd:Graphs"><i class="fa fa-check"></i><b>13.13</b> Graphical map quality measures</a></li>
<li class="chapter" data-level="13.14" data-path="compendium.html"><a href="compendium.html#cd:Evaluation"><i class="fa fa-check"></i><b>13.14</b> Model evaluation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Soil Organic Carbon Mapping Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-sharing" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Data sharing</h1>
<p><em>T. Hengl, L. Poggio, E. Ribeiro &amp; B. Kempen</em></p>
<p>This Chapter reviews possibilities and <em>good practices</em> of exchanging produced soil data. Once the analysis, spatial prediction and quality control have been all completed, it is useful to follow some minimum steps and export and prepare the data for distribution so that its potential users can easily access it, use it, and make a correct interpretation of data. We consider geo-publishing options for soil data either based on using third-party web services or by using one’s own installation of the software. We put a clear focus on using the Open Source software solutions: GDAL, GeoServer, Leaflet, OpenLayers and <strong>R</strong>, and public domain data and metadata standards.</p>
<p>The authors have more than 15 years of experience in producing, publishing and sharing soil maps and have been involved in large soil mapping projects where data volumes often exceed standard desktop GIS capacities. For information on specific software please refer to the provided links. Even more information on using GDAL and similar GIS tools through a command line can be found via the Global Soil Information Facilities (GSIF) tutorials of ISRIC at <a href="http://gsif.isric.org" class="uri">http://gsif.isric.org</a>. The text is illustrated with example scripts of the statistical software <strong>R</strong> in combination with GDAL.</p>
<p>The authors of this Chapter used <strong>R</strong> packages. To run the code provided in this Chapter, the following packages need to be installed in the <strong>R</strong> user library. If the packages are not yet installed, the <code>install.packages()</code> function can be used.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="co"># Installing packages for Chapter &#39;Data Sharing&#39;</span></a>
<a class="sourceLine" id="cb208-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;soiltexture&quot;</span>, <span class="st">&quot;rgdal&quot;</span>, <span class="st">&quot;plotKML&quot;</span>,</a>
<a class="sourceLine" id="cb208-3" data-line-number="3">                   <span class="st">&quot;sf&quot;</span>, <span class="st">&quot;RSQLite&quot;</span>, <span class="st">&quot;leaflet&quot;</span>,</a>
<a class="sourceLine" id="cb208-4" data-line-number="4">                   <span class="st">&quot;htmlwidgets&quot;</span>, <span class="st">&quot;GSIF&quot;</span>, <span class="st">&quot;raster&quot;</span>))</a></code></pre></div>
<div id="export-formats" class="section level2">
<h2><span class="header-section-number">10.1</span> Export formats</h2>
<div id="type-of-soil-data-and-their-formatting" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Type of soil data and their formatting</h3>
<p>Before we start reviewing soil data formats, it is useful to understand which types of soil variables, soil maps, and soil DBs are most commonly generated and used, and what are their specific advantages and limitations. Soil science works with many variables common to ecology and/or physical geography (e.g. soil temperature), but it also works with several variables specific to soil science only. Some soil factor-type variables specific to soil science only are for example:</p>
<ul>
<li>Soil taxa or soil classes (this includes taxonomic systems and connected diagnostic soil properties and horizons);</li>
<li>Soil texture-class systems;</li>
<li>Soil color classification systems e.g. Munsell color codes;</li>
<li>Soil drainage classes (hydrological classifications); and</li>
<li>Soil diagnostic horizons.</li>
</ul>
<p>Consider for example the following soil texture data:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1"><span class="kw">library</span>(soiltexture)</a>
<a class="sourceLine" id="cb209-2" data-line-number="2"></a>
<a class="sourceLine" id="cb209-3" data-line-number="3">tex &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb209-4" data-line-number="4">  <span class="dt">CLAY =</span> <span class="kw">c</span>(<span class="dv">05</span>,<span class="dv">60</span>,<span class="dv">15</span>,<span class="dv">05</span>,<span class="dv">25</span>,<span class="dv">05</span>,<span class="dv">25</span>,<span class="dv">45</span>,<span class="dv">65</span>,<span class="dv">75</span>,<span class="dv">13</span>,<span class="dv">47</span>),</a>
<a class="sourceLine" id="cb209-5" data-line-number="5">  <span class="dt">SILT =</span> <span class="kw">c</span>(<span class="dv">05</span>,<span class="dv">08</span>,<span class="dv">15</span>,<span class="dv">25</span>,<span class="dv">55</span>,<span class="dv">85</span>,<span class="dv">65</span>,<span class="dv">45</span>,<span class="dv">15</span>,<span class="dv">15</span>,<span class="dv">17</span>,<span class="dv">43</span>),</a>
<a class="sourceLine" id="cb209-6" data-line-number="6">  <span class="dt">SAND =</span> <span class="kw">c</span>(<span class="dv">90</span>,<span class="dv">32</span>,<span class="dv">70</span>,<span class="dv">70</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">70</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb209-7" data-line-number="7"> )</a>
<a class="sourceLine" id="cb209-8" data-line-number="8"> </a>
<a class="sourceLine" id="cb209-9" data-line-number="9"><span class="kw">TT.plot</span>(<span class="dt">class.sys =</span> <span class="st">&quot;USDA.TT&quot;</span>, <span class="dt">tri.data =</span> tex, <span class="dt">main =</span> <span class="st">&quot;&quot;</span>, </a>
<a class="sourceLine" id="cb209-10" data-line-number="10">        <span class="dt">cex.axis=</span>.<span class="dv">7</span>, <span class="dt">cex.lab=</span>.<span class="dv">7</span>)</a></code></pre></div>
<div class="figure">
<img src="images/Data_sharing_triangle.png" alt="Soil texture triangle plot as an example of soil science specific data" />
<p class="caption">Soil texture triangle plot as an example of soil science specific data</p>
</div>
<p>The way soil texture data is displayed and texture classes (SaLo, Lo, Sa, etc.) used in a texture triangle is specific to soil science. The way this data is formatted and presented can be, likewise, specific to soil science only.</p>
<p>Most of the soil data is in fact spatial. <em>Spatial</em> implies that spatial (and temporal) reference is attached to each measured/estimated value, i.e. it is location specific. Spatio-temporal references typically include for example:</p>
<ul>
<li>Geographic location in local or geographic coordinates (ideally longitude and latitude in the WGS84 coordinate system);</li>
<li>Depth interval expressed in cm from land surface (upper and lower depth);</li>
<li>Support size or referent soil volume (or voxel) i.e. the horizontal sampling area multiplied by the thickness of the sampling block;</li>
<li>Temporal reference i.e. begin and end date/time of the period of measurements/estimations.</li>
</ul>
<p>Spatial data formats are used to represent spatial objects. This can be <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand2013classes">2013</a>; Neteler and Mitasova <a href="#ref-neteler2013open">2013</a>)</span>:</p>
<ul>
<li><strong>Points</strong> (2D or 3D): Used to represent sampling locations, soil horizons, soil profiles, etc.</li>
<li><strong>Lines</strong> (2D): Used to represent soil transects, streams, administrative boundaries, etc.</li>
<li><strong>Polygons</strong> (2D): Used to represent soil mapping units and/or geomorphological units, landforms, administrative areas, farms, plot trials, etc.</li>
<li><strong>Grids or rasters</strong> (2D or 2.5D): Used to represent soil spatial predictions (spatially complete) of soil properties and classes, etc.</li>
<li><strong>3D grids or Voxels</strong>: Used to represent soil spatial predictions (spatially complete) of soil properties in 3D.</li>
</ul>
<p>It is also important to be able to distinguish between sampled or predicted soil data:</p>
<ul>
<li><strong>Sampled soil Data</strong>: Soil samples (usually points or transects) are spatially incomplete. They are used to generate spatial predictions.</li>
<li><strong>Predicted soil data</strong>: Spatial predictions of soil variables (soil maps) are spatially complete. They are used for decision making and further modeling, i.e. they are used to construct a Soil Information System (SIS).</li>
</ul>
<div class="figure">
<img src="images/Data_sharing_soil_variables.png" alt="Some frequently required soil variables (sorted by number of studies) based on the study by Keller et al. (2014). This list is probably country/project specific but illustrates the differences considering the interest in soil data" />
<p class="caption">Some frequently required soil variables (sorted by number of studies) based on the study by Keller et al. (2014). This list is probably country/project specific but illustrates the differences considering the interest in soil data</p>
</div>
<p>A collection of spatially exhaustive soil grids of various soil properties (physical and chemical soil properties, soil water, soil classification, etc.) make a SIS. SIS are often complemented with soil sample data and serve both data formats. A SIS should preferably be a database (DB), so that users can access and query data using some standard DB languages (e.g. SQL). Steps to export soil data into a DB format are explained in later Sections.</p>
</div>
<div id="general-gis-data-formats-vector-raster-table" class="section level3">
<h3><span class="header-section-number">10.1.2</span> General GIS data formats: vector, raster, table</h3>
<p>All soil data we produce through soil mapping can be in principle distributed using one of the two basic GIS formats of data:</p>
<ul>
<li><strong>Vector format</strong>: This format is often more suitable for exporting point, line, and polygon (areal) data.</li>
<li><strong>Raster or gridded format</strong>: This format is often more suitable for exporting spatial predictions of soil variables.</li>
</ul>
<p>Data in vector format can be converted to raster (see e.g. <code>rasterize()</code> function in the <strong>raster</strong> <strong>R</strong> package ) and vice versa, raster data can be converted to vector formats. For example, rasters can be converted to polygons (see e.g. <code>rast2vect()</code> function in the <strong>plotKML</strong> <strong>R</strong> package ). If the conversion is done carefully and if all the relations between scale and pixel size have been considered <span class="citation">(see Hengl <a href="#ref-hengl2006finding">2006</a> for more details)</span>, then information loss due to conversion from raster to vector and vice versa should be minimal.</p>
<p>Both vector and raster GIS data can also be converted to tabular data formats. By converting a GIS layer to a table, spatial geometry and spatial relations will be <em>stripped off</em>, so that only limited spatial analysis operations can be applied. To convert raster layers to tabular data, consider using the <code>SpatialPixelsDataFrame</code> class in the <strong>sp</strong> package and/or the <code>RasterLayer</code> class from the <strong>raster</strong> package in combination with the <strong>rgdal</strong> package <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand2013classes">2013</a>)</span>.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="kw">library</span>(rgdal)</a>
<a class="sourceLine" id="cb210-2" data-line-number="2"><span class="kw">library</span>(plotKML)</a>
<a class="sourceLine" id="cb210-3" data-line-number="3"></a>
<a class="sourceLine" id="cb210-4" data-line-number="4">?readGDAL</a>
<a class="sourceLine" id="cb210-5" data-line-number="5">spnad83 &lt;-<span class="st"> </span><span class="kw">readGDAL</span>(<span class="kw">system.file</span>(<span class="st">&quot;pictures/erdas_spnad83.tif&quot;</span>, </a>
<a class="sourceLine" id="cb210-6" data-line-number="6">                                <span class="dt">package =</span> <span class="st">&quot;rgdal&quot;</span>)[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb210-7" data-line-number="7">spnad83.tbl &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(spnad83)</a>
<a class="sourceLine" id="cb210-8" data-line-number="8"><span class="kw">str</span>(spnad83.tbl)</a></code></pre></div>
<p>In this example, <code>as.data.frame()</code> is a function converting a raster object to a table. Note that the output table now contains coordinates for each cell (center of the grid node), which is in fact memory inefficient as coordinates are provided for each row in the table.</p>
<p>Likewise, to convert a vector layer to tabular formats one can use the Simple Features (SF) functionality of the <strong>sf</strong> package . The SF standard is widely implemented in spatial databases (PostGIS, ESRI ArcGIS) and forms the vector data basis for libraries such as GDAL and web standards such as GeoJSON (<a href="http://geojson.org/" class="uri">http://geojson.org/</a>). To convert for example spatial polygons layer to a tabular format we would use:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="kw">library</span>(plotKML)</a>
<a class="sourceLine" id="cb211-3" data-line-number="3"></a>
<a class="sourceLine" id="cb211-4" data-line-number="4"><span class="kw">data</span>(eberg_zones)</a>
<a class="sourceLine" id="cb211-5" data-line-number="5"><span class="kw">class</span>(eberg_zones)</a>
<a class="sourceLine" id="cb211-6" data-line-number="6">eberg_zones.tbl &lt;-<span class="st"> </span><span class="kw">as</span>(eberg_zones, <span class="st">&quot;sf&quot;</span>)</a>
<a class="sourceLine" id="cb211-7" data-line-number="7"><span class="kw">str</span>(eberg_zones.tbl)</a></code></pre></div>
<p>Note that using spatial layers in simple tabular formats can be cumbersome because many spatial relationships and properties are likely lost (although these can be assigned reversibly). In addition, the size of tabular objects is much bigger than if we use data in the original GIS data formats, especially if those formats support compression. On the other hand, having data in tabular format can be often the only way to exchange the data from spatial to non-spatial databases or from software without any data communication bridge. Also, tabular data is human-readable which means that it can be opened in text editors, spreadsheet programs or similar.</p>
</div>
<div id="recommended-gis-data-exchange-formats" class="section level3">
<h3><span class="header-section-number">10.1.3</span> Recommended GIS data exchange formats</h3>
<p>As a general recommendation producers of soil data should primarily look at using the following data formats for exchanging soil data (points, polygons, and rasters):</p>
<ul>
<li><strong>GPKG</strong>: An open format (<code>*.gpkg</code> file) for geospatial information. Platform-independent, portable, self-describing, compact format for transferring geospatial information.</li>
<li><strong>GeoTIFF</strong> (for rasters): A <code>*.tiff</code> or <code>*.tif</code> (image) file that allows embedding spatial reference information, metadata and color legends. It also supports internal compression algorithms and hierarchical indexing.</li>
</ul>
<p>Both formats can be read easily in <strong>R</strong> or similar data processing software. Vectors are also commonly exported and shared in ESRI shapefile format (as <code>*.shp</code> file). The advantage of GPKG format versus somewhat more common ESRI shapefile format is that <code>*.gpkg</code> files are basically a portable database (SQLite container) so that the user does not have to import the whole data into a program but also fetch parts of data by using SQL queries and it can handle vector and raster data in it. The following example demonstrates how to create a <code>*.gpkg</code> file and how to query it:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="kw">library</span>(RSQLite)</a>
<a class="sourceLine" id="cb212-2" data-line-number="2"></a>
<a class="sourceLine" id="cb212-3" data-line-number="3"><span class="kw">data</span>(eberg)</a>
<a class="sourceLine" id="cb212-4" data-line-number="4"><span class="kw">coordinates</span>(eberg) &lt;-<span class="st"> </span><span class="er">~</span>X<span class="op">+</span>Y</a>
<a class="sourceLine" id="cb212-5" data-line-number="5"><span class="kw">proj4string</span>(eberg) &lt;-<span class="st"> </span><span class="kw">CRS</span>(<span class="st">&quot;+init=epsg:31467&quot;</span>)</a>
<a class="sourceLine" id="cb212-6" data-line-number="6"><span class="kw">writeOGR</span>(eberg, <span class="st">&quot;eberg.gpkg&quot;</span>, <span class="st">&quot;eberg&quot;</span>, <span class="st">&quot;GPKG&quot;</span>)</a>
<a class="sourceLine" id="cb212-7" data-line-number="7"></a>
<a class="sourceLine" id="cb212-8" data-line-number="8">con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="dt">dbname =</span> <span class="st">&quot;eberg.gpkg&quot;</span>)</a>
<a class="sourceLine" id="cb212-9" data-line-number="9">df &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(con, <span class="st">&#39;select &quot;soiltype&quot; from eberg&#39;</span>)</a>
<a class="sourceLine" id="cb212-10" data-line-number="10"></a>
<a class="sourceLine" id="cb212-11" data-line-number="11"><span class="kw">summary</span>(<span class="kw">as.factor</span>(df<span class="op">$</span>soiltype))</a>
<a class="sourceLine" id="cb212-12" data-line-number="12"></a>
<a class="sourceLine" id="cb212-13" data-line-number="13"><span class="kw">dbGetQuery</span>(con, </a>
<a class="sourceLine" id="cb212-14" data-line-number="14">           <span class="st">&#39;select * from gpkg_spatial_ref_sys&#39;</span>)[<span class="dv">3</span>,<span class="st">&quot;description&quot;</span>]</a></code></pre></div>
<p>Note that the <strong>RSQLite</strong> package is a generic package for connecting to SQLite DBs. This means that <code>*.gpkg</code> files can be accessed and updated in its native storage format without intermediate format translations. Just putting a <code>*.gpkg</code> file on a server with read and execute access allows users to connect and fetch data.</p>
<p>Alternatively, it is also a good idea to store point data in a non-spatial format such as simple tables. For example, in comma-separated file format (CSV) as a <code>*.csv</code> file. A fast way to publish and share tabular data is to use Google Fusion Tables™. Google Fusion Tables™ have an API that allows accessing and using tabular data through various programming platforms. The limitation of using Google Fusion tables™ is, however, data size (currently about 1 GB per user) and similar data volume limits, so this platform should be only used as an intermediate solution for smaller data sets.</p>
<div class="figure">
<img src="images/Data_sharing_eberg.png" alt="Displaying point dataset eberg (used in the previous example) in Google Fusion Tables." />
<p class="caption">Displaying point dataset eberg (used in the previous example) in Google Fusion Tables.</p>
</div>
<p>GeoTIFF format is highly recommended for sharing raster data for the following reasons:</p>
<ul>
<li>It is GDAL’s default data format and much functionality for subsetting, reprojecting, reading and writing GeoTIFFs already exists (see GDAL utils).</li>
<li>It supports internal compression via creation options (e.g. COMPRESS=DEFLATE).</li>
<li>Extensive overlay, subset, index, translate functionality is available via GDAL and other open source software. Basically, GeoTIFF functions as a raster DB.</li>
</ul>
<p>Consider for, example the <code>gdallocationinfo()</code> function which allows spatial queries following some indexing system such as row and column number:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1">spnad83.file =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;pictures/erdas_spnad83.tif&quot;</span>, </a>
<a class="sourceLine" id="cb213-2" data-line-number="2">                           <span class="dt">package =</span> <span class="st">&quot;rgdal&quot;</span>)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb213-3" data-line-number="3"><span class="kw">system</span>(<span class="kw">paste0</span>(<span class="st">&#39;gdallocationinfo &#39;</span>, spnad83.file, <span class="st">&#39; 100 100&#39;</span>))</a></code></pre></div>
<p>Such type of overlay operations, thanks to GDAL <span class="citation">(Warmerdam <a href="#ref-warmerdam_geospatial_2008">2008</a>)</span>, are extremely fast and efficient. Likewise, <code>gdalwarp()</code> function can be used subset rasters based on spatial extent or grid index. Rasters can be imported to GeoServer and shared through Web Coverage Service (see Section <a href="data-sharing.html#webService">10.2</a>) or similar likewise function as a spatial raster DB.</p>
<p>As a general recommendation, and to avoid large file sizes, we recommend, however, that you always use integers inside GeoTIFF formats because floating point formats can lead to up to more than four times larger sizes (without any gains in accuracy). This might mean you have to multiply the values of the soil property of interest by 10 or 100, in order not to lose accuracy (e.g. multiply pH values by 10 before exporting your raster in GeoTIFF format).</p>
</div>
</div>
<div id="webService" class="section level2">
<h2><span class="header-section-number">10.2</span> Web services: serving soil data using web technology</h2>
<div id="third-party-services" class="section level3">
<h3><span class="header-section-number">10.2.1</span> Third-party services</h3>
<p>If you are a data producer but with limited technical capacity and/or financial resources, then publishing geo-data through a third-party service could be very well that the easiest and most professional solution for you. Some commonly used commercial web services to share geo-data are:</p>
<ul>
<li>Google MyMaps (<a href="https://www.google.com/mymaps" class="uri">https://www.google.com/mymaps</a>)</li>
<li>ArcGIS Online (<a href="https://www.arcgis.com/home/" class="uri">https://www.arcgis.com/home/</a>)</li>
<li>MapBox (<a href="https://www.mapbox.com/" class="uri">https://www.mapbox.com/</a>)</li>
<li>CARTO (<a href="https://carto.com/" class="uri">https://carto.com/</a>)</li>
</ul>
<p>All these have limitations and primarily suitable for sharing vector type data only. Their free functionality is very limited so before you start uploading any larger data sets, please check the size limits based on your account. Upgrading your license will allow you to increase storage and functionality so that even with few hundred dollars per year you could have a robust solution for sharing your data with thousands of users.</p>
<p>Soil data producers can also contact ISRIC, as World Data Centre for Soils, to request support for hosting and/or distributing their soil data in case they lack the technical capacity to do so themselves while adhering to the data sharing agreement and license set by the data producer.</p>
</div>
<div id="geoserver-web-serving-and-web-processing" class="section level3">
<h3><span class="header-section-number">10.2.2</span> GeoServer (web serving and web processing)</h3>
<p>GeoServer (<a href="http://geoserver.org/" class="uri">http://geoserver.org/</a>) is an open source software solution for serving raster or vector data. It includes the majority of the Open Geospatial Consortium (OGC) service standards: the Web Map Service, Web Coverage Service and Web Processing Service <span class="citation">(Youngblood <a href="#ref-youngblood2013geoserver">2013</a>)</span>. Installation and maintenance of GeoServer is however not trivial and requires specialized technical staff. Web services can also entail significant costs depending on the amount of web-processing and web-traffic. For every medium to large size organization, it is probably a better idea to use the out-of-box solution for GeoServer which is the GeoNode (<a href="http://geonode.org/" class="uri">http://geonode.org/</a>). GeoNode also includes a web-interface and user-management system so that new layers can be uploaded to GeoServer through a web-form type interface.</p>
<p>The very important functionality of GeoServer are the OGC standard services such as the Web Coverage Service (WCS) and the Web Feature Service (WFS). WCS means that not only data views are available to users, but WCS can also do data translation, aggregation or resampling, overlay etc. Consider for example the SoilGrids WCS (which can also be opened in QGIS or similar software supporting WCS). Users can direct this WCS and request only a subset of data for some area, aggregated to some preferred resolution/pixel size by using <em>gdal_translate</em> or similar. This means that, in few steps, users can download a subset of data on GeoServer in a preferred format without a need to download the whole dataset.</p>
<div class="figure">
<img src="images/Data_sharing_SoilGrids.png" alt="SoilGrids (Hengl et al. 2017) WCS opened in QGIS" />
<p class="caption">SoilGrids (Hengl et al. 2017) WCS opened in QGIS</p>
</div>
</div>
<div id="visualizing-data-using-leaflet-andor-google-earth" class="section level3">
<h3><span class="header-section-number">10.2.3</span> Visualizing data using Leaflet and/or Google Earth</h3>
<p>A quick way to visualize produced soil maps and then share them to users without GIS capacities is to use <strong>leaflet</strong> package in <strong>R</strong>. Leaflet is basically a stand-alone web-page that contains all information (including some popular Web Mapping Services) so that users can visually explore patterns without having to install and use any desktop GIS. Consider the following example:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="kw">library</span>(leaflet)</a>
<a class="sourceLine" id="cb214-2" data-line-number="2"><span class="kw">library</span>(htmlwidgets)</a>
<a class="sourceLine" id="cb214-3" data-line-number="3"><span class="kw">library</span>(GSIF)</a>
<a class="sourceLine" id="cb214-4" data-line-number="4"><span class="kw">library</span>(raster)</a>
<a class="sourceLine" id="cb214-5" data-line-number="5"></a>
<a class="sourceLine" id="cb214-6" data-line-number="6"><span class="kw">demo</span>(meuse, <span class="dt">echo=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb214-7" data-line-number="7">omm &lt;-<span class="st"> </span><span class="kw">autopredict</span>(meuse[<span class="st">&quot;om&quot;</span>], meuse.grid[<span class="kw">c</span>(<span class="st">&quot;dist&quot;</span>,<span class="st">&quot;soil&quot;</span>,<span class="st">&quot;ffreq&quot;</span>)],</a>
<a class="sourceLine" id="cb214-8" data-line-number="8">                   <span class="dt">method=</span><span class="st">&quot;ranger&quot;</span>, <span class="dt">auto.plot=</span><span class="ot">FALSE</span>, <span class="dt">rvgm=</span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb214-9" data-line-number="9">meuse.ll &lt;-<span class="st"> </span><span class="kw">reproject</span>(meuse[<span class="st">&quot;om&quot;</span>])</a>
<a class="sourceLine" id="cb214-10" data-line-number="10"></a>
<a class="sourceLine" id="cb214-11" data-line-number="11"><span class="co"># Reprojecting to +proj=longlat +datum=WGS84</span></a>
<a class="sourceLine" id="cb214-12" data-line-number="12">m =<span class="st"> </span><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb214-13" data-line-number="13"><span class="st">    </span><span class="kw">addRasterImage</span>(<span class="kw">raster</span>(omm<span class="op">$</span>predicted[<span class="st">&quot;om&quot;</span>]), </a>
<a class="sourceLine" id="cb214-14" data-line-number="14">    <span class="dt">colors =</span> SAGA_pal[[<span class="dv">1</span>]][<span class="dv">4</span><span class="op">:</span><span class="dv">20</span>]) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb214-15" data-line-number="15"><span class="st">    </span><span class="kw">addCircles</span>(<span class="dt">lng =</span> meuse.ll<span class="op">@</span>coords[,<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb214-16" data-line-number="16">    <span class="dt">lat =</span> meuse.ll<span class="op">@</span>coords[,<span class="dv">2</span>],</a>
<a class="sourceLine" id="cb214-17" data-line-number="17">    <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&#39;black&#39;</span>), <span class="dt">radius=</span>meuse.ll<span class="op">$</span>om)  </a>
<a class="sourceLine" id="cb214-18" data-line-number="18"></a>
<a class="sourceLine" id="cb214-19" data-line-number="19"><span class="kw">saveWidget</span>(m, <span class="dt">file=</span><span class="st">&quot;organicmater_predicted.html&quot;</span>)</a></code></pre></div>
<div class="figure">
<img src="images/Data_sharing_Leaflet.png" alt="Sampled locations and produced predictions visualized using Leaflet package" />
<p class="caption">Sampled locations and produced predictions visualized using Leaflet package</p>
</div>
<p>Note that the whole data set including styling and legends is basically available through a single <code>*.html</code> file (<code>organicmater_predicted.html</code>). Anyone opening that HTML format file in their browsers will get an interactive web-map that contains both samples and spatial predictions.</p>
<p>An alternative to using Leaflet is to put all data, including documents and multimedia, about your project in a Keyhole Markup Language (KML) format. As <code>*.kml</code> file the data is available for viewing in Google Earth <span class="citation">(Hengl, Roudier, et al. <a href="#ref-hengl2015plotkml">2015</a>)</span>. KML is very rich in what it can incorporate: textual data, photographs, documents, animations, videos, etc. In fact, probably whole projects can be put into a single <code>*.kml</code> file so that the users only need to open it in Google Earth and then explore interactively. Note that <code>*.kml</code> files with ground overlays will be generated by GeoServer by default, although further customization is up to the data producer.</p>
</div>
</div>
<div id="preparing-soil-data-for-distribution" class="section level2">
<h2><span class="header-section-number">10.3</span> Preparing soil data for distribution</h2>
<div id="metadata" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Metadata</h3>
<p>One important thing to consider prior to data distribution is construction of metadata (explanation of data, how was it produced and what are the exact technical specifications). There are several metadata standards that can be used to prepare metadata. More recently, complete and consistent metadata is a requirement by many government agencies and organizations. There are now several public metadata validators that run all possible consistency and completeness checks before the metadata (and data) can be accepted.</p>
<p>Typical metadata should (at least) contain:</p>
<ul>
<li>Detailed description of the variables available in the data;</li>
<li>Data license and terms of use (URL);</li>
<li>Explanation of measurement methods and units used;</li>
<li>Mention of the reference support size including referent depth intervals to which the soil data refers to (e.g. 0 cm – 30 cm depth interval);</li>
<li>Mention of the referent time period in which the calibration data was collected;</li>
<li>Link to literature (report, book or scientific article) where the data production is explained in detail. Using a published and peer-reviewed scientific article as the main reference for data is a good practice since it also shows that the data production process has been evaluated by independent researchers; and</li>
<li>Project homepage, i.e. URL containing more information and especially up-to-date contacts where users can find original data producers and request support.</li>
</ul>
<p>Metadata (including color legends) can be also directly embedded into the GeoTIFF <code>*.tif</code> file by using the <em>gdal_edit</em> command available in GDAL. The following example shows how to add a simple explanation of the data and a URL to find more info about the GeoTIFF in <strong>R</strong>:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1"><span class="kw">data</span>(<span class="st">&quot;eberg_grid&quot;</span>)</a>
<a class="sourceLine" id="cb215-2" data-line-number="2"></a>
<a class="sourceLine" id="cb215-3" data-line-number="3"><span class="kw">gridded</span>(eberg_grid) =<span class="st"> </span><span class="er">~</span><span class="st"> </span>x<span class="op">+</span>y</a>
<a class="sourceLine" id="cb215-4" data-line-number="4"><span class="kw">proj4string</span>(eberg_grid) &lt;-<span class="st"> </span><span class="kw">CRS</span>(<span class="st">&quot;+init=epsg:31467&quot;</span>)</a>
<a class="sourceLine" id="cb215-5" data-line-number="5"><span class="kw">writeGDAL</span>(eberg_grid[<span class="st">&quot;DEMSRT6&quot;</span>], <span class="st">&quot;eberg_DEM.tif&quot;</span>, </a>
<a class="sourceLine" id="cb215-6" data-line-number="6">            <span class="dt">options=</span><span class="st">&quot;COMPRESS=DEFLATE&quot;</span>)</a>
<a class="sourceLine" id="cb215-7" data-line-number="7">?eberg</a>
<a class="sourceLine" id="cb215-8" data-line-number="8"></a>
<a class="sourceLine" id="cb215-9" data-line-number="9"><span class="kw">system</span>(<span class="kw">paste0</span>(<span class="st">&#39;gdal_edit.py </span></a>
<a class="sourceLine" id="cb215-10" data-line-number="10"><span class="st">-mo </span><span class="ch">\&quot;</span><span class="st">DESCRIPTION=elevation values from the SRTM DEM</span><span class="ch">\&quot;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb215-11" data-line-number="11"><span class="st">-mo </span><span class="ch">\&quot;</span><span class="st">DOWNLOAD_URL=http://geomorphometry.org/content/ebergotzen</span><span class="ch">\&quot;</span></a>
<a class="sourceLine" id="cb215-12" data-line-number="12"><span class="st">eberg_DEM.tif&#39;</span>))</a>
<a class="sourceLine" id="cb215-13" data-line-number="13"><span class="kw">system</span>(<span class="st">&#39;gdalinfo eberg_DEM.tif&#39;</span>)</a></code></pre></div>
<p>Similarly, all necessary metadata can be added into GeoTIFF so that future users have all information at one place, i.e. inside the data file.</p>
</div>
<div id="exporting-data-final-tips" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Exporting data: final tips</h3>
<p>As we have shown previously, if you export soil data into either GPKG and/or GeoTIFF format, these data can be accessed using DB operations. In fact, by exporting the data to GPKG and GeoTIFFs, you have created a soil spatial DB or a soil information system. This does not necessarily mean that its targeted users will be able to find all information without problems and/or questions. How usable and how popular a data set is, is a function of many aspects, not only data quality. You could create maps of perfect quality but have no users at all. |The following instructions should be definitively considered, as a way to boost the usability of your data are.</p>
<ol style="list-style-type: decimal">
<li>Make a landing page for your data that includes:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Simple access/download instructions;</li>
<li>Screenshots of your data in action (people prefer visual explanations with examples);</li>
<li>Links to key documents explaining how the data was produced; and</li>
<li>Workflows explaining how to request support (who to contact and how).</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>Make data accessible from multiple systems, e.g, both via WCS, FTP and through a mirror site. This might be inefficient considering there will be multiple copies of the same data, but sometimes it quadruples data usage.</li>
<li>Explain the data formats used to share data, and point to tutorials that explain how to access and use data to both beginners and advanced users.</li>
<li>Consider installing and using a version control system (or simply use GitHub or similar repository) so that the users can track back versions of data.</li>
<li>Consider closely following principles of reproducible research (all processing steps, inputs, and outputs accessible). This tutorial comes with <strong>R</strong> code that is available via GitHub so that everyone should be able to reproduce the examples shown in the text.</li>
</ol>
</div>
</div>
<div id="export-formats-1" class="section level2">
<h2><span class="header-section-number">10.4</span> Export formats</h2>
<p>The produced results need to be exported in formats that can be easily read by a variety of GIS software. Two widely used formats for raster data are GeoTIFF and KML.</p>
<ul>
<li><strong>GeoTIFF</strong>: A public domain metadata standard which allows georeferencing information to be embedded within a <code>*.tiff</code> file. The potential additional information includes map projection, coordinate systems, ellipsoids, datums, and everything else necessary to establish the exact spatial reference for the file.</li>
<li><strong>KML</strong>: Keyhole Markup Language is an XML notation for expressing geographic annotation and visualization within internet-based, two-dimensional maps and three-dimensional Earth browsers. KML became an international standard of the OGC in 2008.</li>
</ul>
<p>Raster data in GeoTIFF format need a defined geographic projection. Each country has its own national system (or systems). In order to construct a mosaic of national datasets, a common projection has to be defined and national data need to be re-projected in the common projection. Data projections can be managed using open source tools such as GIS software, GDAL tools suite (<a href="http://www.gdal.org/" class="uri">http://www.gdal.org/</a>) and various packages of the <strong>R</strong> software (<a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>). Projections can be defined according to different standards. A common way is the EPSG database. EPSG Geodetic Parameter Dataset is a collection of definitions of coordinate reference systems and coordinate transformations which may be global, regional, national or local application. A numeric code is assigned to each of the most common projections, making easier to refer to them and to switch between them. One of the most common global projections is WGS84 (EPSG 4336), used for maps and by the GPS satellite navigation system.</p>
<p>Each file should be accompanied by a set list of metadata. Geospatial metadata is a type of metadata that is applicable to objects that have an explicit or implicit geographic extent. While using GeoTIFF files it is possible to define a metadata field in which information can be recorded. Metadata can be edited with most GIS software and directly with GDAL tools (<a href="http://www.gdal.org/gdal_edit.html" class="uri">http://www.gdal.org/gdal_edit.html</a>).</p>
<blockquote>
<p>Tips for <strong>GDAL</strong>: <em>gdalwarp -t_srs</em> ‘xxx’ <code>input.tif</code> <code>output.tif</code> where <em>t_srs</em> is the target spatial reference set, i.e. the coordinate systems that can be passed are anything supported by the <code>GRSpatialReference.SetFromUserInput()</code> call, which includes EPSG PCS and GCSes (i.e. EPSG:4326), PROJ.4 declarations or the name of a <code>*.prj</code> file containing well known text.
For further information see the link: <a href="http://www.gdal.org/gdalwarp.html" class="uri">http://www.gdal.org/gdalwarp.html</a>.</p>
</blockquote>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-bivand2013classes">
<p>Bivand, Roger S, Edzer Pebesma, and Virgilio Gómez-Rubio. 2013. “Classes for Spatial Data in R.” In <em>Applied Spatial Data Analysis with R</em>, 21–57. Springer.</p>
</div>
<div id="ref-neteler2013open">
<p>Neteler, Markus, and Helena Mitasova. 2013. <em>Open Source Gis: A Grass Gis Approach</em>. Vol. 689. Springer Science &amp; Business Media.</p>
</div>
<div id="ref-hengl2006finding">
<p>Hengl, Tomislav. 2006. “Finding the Right Pixel Size.” <em>Computers &amp; Geosciences</em> 32 (9). Elsevier:1283–98.</p>
</div>
<div id="ref-warmerdam_geospatial_2008">
<p>Warmerdam, Frank. 2008. “The Geospatial Data Abstraction Library.” In <em>Open Source Approaches in Spatial Data Handling</em>, edited by G. Brent Hall and Michael G. Leahy, 87–104. Berlin, Heidelberg: Springer Berlin Heidelberg. <a href="https://doi.org/10.1007/978-3-540-74831-1_5" class="uri">https://doi.org/10.1007/978-3-540-74831-1_5</a>.</p>
</div>
<div id="ref-youngblood2013geoserver">
<p>Youngblood, Brian. 2013. <em>GeoServer Beginner’s Guide</em>. Packt Publishing Ltd.</p>
</div>
<div id="ref-hengl2015plotkml">
<p>Hengl, Tomislav, Pierre Roudier, Dylan Beaudette, Edzer Pebesma, and others. 2015. “PlotKML: Scientific Visualization of Spatio-Temporal Data.” <em>Journal of Statistical Software</em> 63 (5). Foundation for Open Access Statistics:1–25.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="uncertainty.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="technical-overview-and-the-checklist.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/FAO-GSP/SOC-Mapping-Cookbook/edit/master/10-data-sharing.Rmd",
"text": "Edit"
},
"download": ["SOCMapping.pdf", "SOCMapping.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
